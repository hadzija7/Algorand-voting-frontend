(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{185:function(n,e,t){"use strict";e.a='#pragma version 5\ntxn ApplicationID\nint 0\n==\nbnz main_l24\ntxn OnCompletion\nint DeleteApplication\n==\nbnz main_l23\ntxn OnCompletion\nint UpdateApplication\n==\nbnz main_l22\ntxn OnCompletion\nint OptIn\n==\nbnz main_l21\ntxna ApplicationArgs 0\nbyte "vote"\n==\nbnz main_l13\ntxna ApplicationArgs 0\nbyte "declare_winner"\n==\nbnz main_l7\nerr\nmain_l7:\ntxn Sender\nbyte "OWNER"\napp_global_get\n==\nglobal LatestTimestamp\nbyte "END"\napp_global_get\n>=\n&&\nassert\nbyte "WINNER"\nbyte "OPTION1"\napp_global_get\napp_global_put\nbyte "COUNT2"\napp_global_get\nbyte "COUNT1"\napp_global_get\n>\nbnz main_l12\nbyte "COUNT3"\napp_global_get\nbyte "COUNT2"\napp_global_get\n>\nbnz main_l10\nerr\nmain_l10:\nbyte "WINNER"\nbyte "OPTION3"\napp_global_get\napp_global_put\nmain_l11:\nint 1\nreturn\nmain_l12:\nbyte "WINNER"\nbyte "OPTION2"\napp_global_get\napp_global_put\nb main_l11\nmain_l13:\ntxn NumAppArgs\nint 2\n==\ntxn Sender\nbyte "VOTED"\napp_local_get\nint 0\n==\n&&\nglobal LatestTimestamp\nbyte "END"\napp_global_get\n<\n&&\nassert\ntxna ApplicationArgs 1\nbyte "OPTION1"\napp_global_get\n==\nbnz main_l20\ntxna ApplicationArgs 1\nbyte "OPTION2"\napp_global_get\n==\nbnz main_l19\ntxna ApplicationArgs 1\nbyte "OPTION3"\napp_global_get\n==\nbnz main_l17\nerr\nmain_l17:\nbyte "COUNT3"\nbyte "COUNT3"\napp_global_get\nint 1\n+\napp_global_put\nmain_l18:\ntxn Sender\nbyte "VOTED"\nint 1\napp_local_put\nint 1\nreturn\nmain_l19:\nbyte "COUNT2"\nbyte "COUNT2"\napp_global_get\nint 1\n+\napp_global_put\nb main_l18\nmain_l20:\nbyte "COUNT1"\nbyte "COUNT1"\napp_global_get\nint 1\n+\napp_global_put\nb main_l18\nmain_l21:\nint 1\nreturn\nmain_l22:\nglobal CreatorAddress\ntxn Sender\n==\nassert\nint 1\nreturn\nmain_l23:\ntxn Sender\nglobal CreatorAddress\n==\nreturn\nmain_l24:\ntxn NumAppArgs\nint 7\n==\nassert\ntxn Note\nbyte "voting-system:uv1"\n==\nassert\nbyte "ID"\ntxna ApplicationArgs 0\napp_global_put\nbyte "IMAGE"\ntxna ApplicationArgs 1\napp_global_put\nbyte "DESCRIPTION"\ntxna ApplicationArgs 2\napp_global_put\nbyte "OPTION1"\ntxna ApplicationArgs 3\napp_global_put\nbyte "OPTION2"\ntxna ApplicationArgs 4\napp_global_put\nbyte "OPTION3"\ntxna ApplicationArgs 5\napp_global_put\nbyte "START"\nglobal LatestTimestamp\napp_global_put\nbyte "END"\nglobal LatestTimestamp\ntxna ApplicationArgs 6\nbtoi\n+\napp_global_put\nbyte "OWNER"\ntxn Sender\napp_global_put\nbyte "COUNT1"\nint 0\napp_global_put\nbyte "COUNT2"\nint 0\napp_global_put\nbyte "COUNT3"\nint 0\napp_global_put\nbyte "WINNER"\nbyte ""\napp_global_put\nint 1\nreturn'},186:function(n,e,t){"use strict";e.a="#pragma version 5\nint 1\nreturn"},193:function(n,e,t){},21:function(n,e,t){"use strict";(function(n){t.d(e,"a",(function(){return o})),t.d(e,"e",(function(){return i})),t.d(e,"d",(function(){return s})),t.d(e,"b",(function(){return l})),t.d(e,"c",(function(){return u}));var a=t(8),c=t(92),r=t.n(c),o=function(e){return n.from(e,"base64").toString("utf-8")},i=function(e){return n.from(e,"utf8").toString("base64")},s=function(n){if(n)return n.toString().slice(0,5)+"..."+n.toString().slice(n.length-5,n.length)},l=function(n){if(n)return new r.a(n).shiftedBy(-a.a).toFixed(3)},u=function(n){if(n)return new r.a(n).toNumber()}}).call(this,t(14).Buffer)},215:function(n,e){},217:function(n,e){},228:function(n,e){},230:function(n,e){},257:function(n,e){},259:function(n,e){},260:function(n,e){},265:function(n,e){},267:function(n,e){},273:function(n,e){},275:function(n,e){},294:function(n,e){},306:function(n,e){},309:function(n,e){},331:function(n,e,t){"use strict";t.r(e);var a=t(0),c=t.n(a),r=t(30),o=t.n(r),i=t(10),s=t(17),l=t(6),u=t(180),b=t(1),p=function(n){var e=n.name,t=n.coverImg,a=n.connect;return Object(b.jsxs)("div",{className:"d-flex justify-content-center flex-column text-center bg-black min-vh-100",children:[Object(b.jsxs)("div",{className:"mt-auto text-light mb-5",children:[Object(b.jsx)("div",{className:" ratio ratio-1x1 mx-auto mb-2",style:{maxWidth:"320px"},children:Object(b.jsx)("img",{src:t,alt:""})}),Object(b.jsx)("h1",{children:e}),Object(b.jsx)("p",{children:"Please connect your wallet to continue."}),Object(b.jsx)(u.a,{onClick:function(){return a()},variant:"outline-light",className:"rounded-pill px-3 mt-3",children:"Connect Wallet"})]}),Object(b.jsx)("p",{className:"mt-auto text-secondary",children:"Powered by Algorand"})]})},d=(t(193),t(340)),j=t(337),O=t(345),x=t(21),f=t(2),m=t(3),g=t(182),h=t.n(g),v=["size","address"],_=function(n){var e=n.size,t=n.address,a=Object(m.a)(n,v);return Object(b.jsx)("div",Object(f.a)(Object(f.a)({},a),{},{style:{width:"".concat(e,"px"),height:"".concat(e,"px")},children:Object(b.jsx)(h.a,{diameter:e,seed:parseInt(t.toString().slice(2,10),16)})}))},y=function(n){var e=n.address,t=n.name,a=n.amount,c=n.symbol,r=n.disconnect;return e?Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(d.a,{children:[Object(b.jsxs)(d.a.Toggle,{variant:"light",align:"end",id:"dropdown-basic",className:"d-flex align-items-center border rounded-pill py-1",children:[a?Object(b.jsxs)(b.Fragment,{children:[Object(x.b)(a),Object(b.jsxs)("span",{className:"ms-1",children:[" ",c]})]}):Object(b.jsx)(j.a,{animation:"border",size:"sm",className:"opacity-25"}),Object(b.jsx)(_,{address:e,size:28,className:"ms-2 me-1"})]}),Object(b.jsxs)(d.a.Menu,{className:"shadow-lg border-0",children:[Object(b.jsx)(d.a.Item,{href:"https://testnet.algoexplorer.io/address/".concat(e),target:"_blank",children:Object(b.jsxs)(O.a,{direction:"horizontal",gap:2,children:[Object(b.jsx)("i",{className:"bi bi-person-circle fs-4"}),Object(b.jsxs)("div",{className:"d-flex flex-column",children:[t&&Object(b.jsx)("span",{className:"font-monospace",children:t}),Object(b.jsx)("span",{className:"font-monospace",children:Object(x.d)(e)})]})]})}),Object(b.jsx)(d.a.Divider,{}),Object(b.jsxs)(d.a.Item,{as:"button",className:"d-flex align-items-center",onClick:function(){r()},children:[Object(b.jsx)("i",{className:"bi bi-box-arrow-right me-2 fs-4"}),"Disconnect"]})]})]})}):null},N=t(339),T=t(343),w=t(23),I=t(341),C=t(342),A=t(184),P=function(n){var e=n.createPoll,t=Object(a.useState)(""),c=Object(l.a)(t,2),r=c[0],o=c[1],i=Object(a.useState)(""),s=Object(l.a)(i,2),p=s[0],d=s[1],j=Object(a.useState)(""),O=Object(l.a)(j,2),f=O[0],m=O[1],g=Object(a.useState)(""),h=Object(l.a)(g,2),v=h[0],_=h[1],y=Object(a.useState)(""),N=Object(l.a)(y,2),T=N[0],w=N[1],P=Object(a.useState)(""),k=Object(l.a)(P,2),E=k[0],S=k[1],F=Object(a.useState)(0),D=Object(l.a)(F,2),R=D[0],U=D[1],B=Object(a.useCallback)((function(){return r&&p&&f&&v&&T&&E&&R}),[r,p,f,v,T,E,R]),L=Object(a.useState)(!1),z=Object(l.a)(L,2),W=z[0],V=z[1],G=function(){return V(!1)};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(u.a,{onClick:function(){return V(!0)},variant:"dark",className:"rounded-pill px-0",style:{width:"38px"},children:Object(b.jsx)("i",{className:"bi bi-plus"})}),Object(b.jsxs)(I.a,{show:W,onHide:G,centered:!0,children:[Object(b.jsx)(I.a.Header,{closeButton:!0,children:Object(b.jsx)(I.a.Title,{children:"New Poll"})}),Object(b.jsx)(C.a,{children:Object(b.jsxs)(I.a.Body,{children:[Object(b.jsx)(A.a,{controlId:"inputName",label:"Product name",className:"mb-3",children:Object(b.jsx)(C.a.Control,{type:"text",onChange:function(n){o(n.target.value)},placeholder:"Enter name of product"})}),Object(b.jsx)(A.a,{controlId:"inputUrl",label:"Image URL",className:"mb-3",children:Object(b.jsx)(C.a.Control,{type:"text",placeholder:"Image URL",value:p,onChange:function(n){d(n.target.value)}})}),Object(b.jsx)(A.a,{controlId:"inputDescription",label:"Description",className:"mb-3",children:Object(b.jsx)(C.a.Control,{as:"textarea",placeholder:"description",style:{height:"80px"},onChange:function(n){m(n.target.value)}})}),Object(b.jsx)(A.a,{controlId:"inputDescription",label:"Option1",className:"mb-3",children:Object(b.jsx)(C.a.Control,{as:"textarea",placeholder:"option1",style:{height:"80px"},onChange:function(n){_(n.target.value)}})}),Object(b.jsx)(A.a,{controlId:"inputDescription",label:"Option2",className:"mb-3",children:Object(b.jsx)(C.a.Control,{as:"textarea",placeholder:"option2",style:{height:"80px"},onChange:function(n){w(n.target.value)}})}),Object(b.jsx)(A.a,{controlId:"inputDescription",label:"Option3",className:"mb-3",children:Object(b.jsx)(C.a.Control,{as:"textarea",placeholder:"option2",style:{height:"80px"},onChange:function(n){S(n.target.value)}})}),Object(b.jsx)(A.a,{controlId:"inputDescription",label:"Voting duration in seconds",className:"mb-3",children:Object(b.jsx)(C.a.Control,{type:"text",placeholder:"0",style:{height:"80px"},onChange:function(n){U(Object(x.c)(n.target.value))}})})]})}),Object(b.jsxs)(I.a.Footer,{children:[Object(b.jsx)(u.a,{variant:"outline-secondary",onClick:G,children:"Close"}),Object(b.jsx)(u.a,{variant:"dark",disabled:!B(),onClick:function(){e({id:r,image:p,description:f,option1:v,option2:T,option3:E,voting_end:R}),G()},children:"Save poll"})]})]})]})},k=t(183),E=t(344),S=function(n){var e=n.address,t=n.poll,c=n.vote,r=n.optIn,o=n.declareWinner,i=n.deletePoll,s=t.id,p=t.image,d=t.description,j=t.option1,f=t.option2,m=t.option3,g=t.count1,h=t.count2,v=t.count3,y=t.voting_start,N=t.voting_end,T=t.winner,w=t.owner,I=(t.appId,Object(a.useState)("")),A=Object(l.a)(I,2),P=A[0],S=A[1];return Object(b.jsx)(k.a,{children:Object(b.jsxs)(E.a,{className:"h-100",children:[Object(b.jsx)(E.a.Header,{children:Object(b.jsxs)(O.a,{direction:"horizontal",gap:2,children:[Object(b.jsx)("span",{className:"font-monospace text-secondary",children:Object(x.d)(w)}),Object(b.jsx)(_,{size:28,address:w})]})}),Object(b.jsx)("div",{className:"ratio ratio-4x3",children:Object(b.jsx)("img",{src:p,alt:s,style:{objectFit:"cover"}})}),Object(b.jsxs)(E.a.Body,{className:"d-flex flex-column text-center",children:[Object(b.jsx)(E.a.Title,{children:s}),Object(b.jsx)(E.a.Text,{className:"flex-grow-1",children:d}),Object(b.jsxs)(C.a,{className:"d-flex align-content-stretch flex-column gap-2",children:[Object(b.jsx)("div",{style:{fontWeight:"bold",fontStyle:"italic"},children:"Select option for voting"}),Object(b.jsxs)("div",{onChange:function(n){S(n.target.value)},children:[Object(b.jsx)("input",{type:"radio",value:j})," ",j," (",g,")",Object(b.jsx)("input",{type:"radio",value:f})," ",f," (",h,")",Object(b.jsx)("input",{type:"radio",value:m})," ",m," (",v,")"]}),Object(b.jsx)("div",{children:Object(b.jsx)(u.a,{onClick:function(){return r(e,t)},children:"OptIn"})}),Object(b.jsx)("div",{children:Object(b.jsx)(u.a,{onClick:function(){return c(t,P)},children:"Vote"})}),Object(b.jsxs)("div",{children:[Object(b.jsx)(u.a,{onClick:function(){return o(e,t)},children:"Declare winner"}),"Winner: ",T]}),Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{children:["Voting start: ",y]}),Object(b.jsxs)("div",{children:["Voting end: ",N]})]}),Object(b.jsx)("div",{children:t.owner===e&&Object(b.jsxs)("div",{children:["Delete poll",Object(b.jsx)(u.a,{variant:"outline-danger",onClick:function(){return i(t)},className:"btn",style:{marginLeft:"10px"},children:Object(b.jsx)("i",{className:"bi bi-trash"})})]})})]})]})]})},s)},F=function(){return Object(b.jsx)("div",{className:"d-flex justify-content-center",children:Object(b.jsx)(j.a,{animation:"border",role:"status",className:"opacity-25",children:Object(b.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})},D=function(){return Object(b.jsx)(w.a,{position:"bottom-center",autoClose:5e3,hideProgressBar:!0,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!1,pauseOnHover:!0})},R=function(n){var e=n.text;return Object(b.jsxs)("div",{children:[Object(b.jsx)("i",{className:"bi bi-check-circle-fill text-success mx-2"}),Object(b.jsx)("span",{className:"text-secondary mx-1",children:e})]})},U=function(n){var e=n.text;return Object(b.jsxs)("div",{children:[Object(b.jsx)("i",{className:"bi bi-x-circle-fill text-danger mx-2"}),Object(b.jsx)("span",{className:"text-secondary mx-1",children:e})]})},B={text:""};R.defaultProps=B,U.defaultProps=B;var L=t(44),z=t(338),W=function(n){var e=n.address,t=n.fetchBalance,c=Object(a.useState)([]),r=Object(l.a)(c,2),o=r[0],u=r[1],p=Object(a.useState)(!1),d=Object(l.a)(p,2),j=d[0],O=d[1],x=function(){var n=Object(s.a)(Object(i.a)().mark((function n(){return Object(i.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:O(!0),Object(L.d)().then((function(n){n&&(console.log("Pollllllls: ",n),u(n))})).catch((function(n){console.log(n)})).finally((function(n){O(!1)}));case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();Object(a.useEffect)((function(){x()}),[]);var f=function(){var n=Object(s.a)(Object(i.a)().mark((function n(a){return Object(i.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:O(!0),Object(L.a)(e,a).then((function(){Object(w.b)(Object(b.jsx)(R,{text:"Poll added successfully."})),x(),t(e)})).catch((function(n){console.log(n),Object(w.b)(Object(b.jsx)(U,{text:"Failed to create a poll."})),O(!1)}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),m=function(){var n=Object(s.a)(Object(i.a)().mark((function n(a){return Object(i.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:O(!0),Object(L.c)(e,a.appId).then((function(){Object(w.b)(Object(b.jsx)(R,{text:"Poll deleted successfully"})),x(),t(e)})).catch((function(n){console.log(n),Object(w.b)(Object(b.jsx)(U,{text:"Failed to delete poll."})),O(!1)}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),g=function(){var n=Object(s.a)(Object(i.a)().mark((function n(a,c){return Object(i.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:O(!0),Object(L.f)(e,a,c).then((function(){Object(w.b)(Object(b.jsx)(R,{text:"Voted successfully"})),x(),t(e)})).catch((function(n){console.log(n),Object(w.b)(Object(b.jsx)(U,{text:"Failed to vote."})),O(!1)}));case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),h=function(){var n=Object(s.a)(Object(i.a)().mark((function n(e,a){return Object(i.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:O(!0),Object(L.e)(e,a).then((function(){Object(w.b)(Object(b.jsx)(R,{text:"Opted in successfully"})),x(),t(e)})).catch((function(n){console.log(n),Object(w.b)(Object(b.jsx)(U,{text:"Failed to optIn."})),O(!1)}));case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),v=function(){var n=Object(s.a)(Object(i.a)().mark((function n(e,a){return Object(i.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:O(!0),Object(L.b)(e,a).then((function(){Object(w.b)(Object(b.jsx)(R,{text:"Successfully ended action"})),x(),t(e)})).catch((function(n){console.log(n),Object(w.b)(Object(b.jsx)(U,{text:"Failed to declare a winner."})),O(!1)}));case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();return j?Object(b.jsx)(F,{}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[Object(b.jsx)("h1",{className:"fs-4 fw-bold mb-0",children:"Street Food"}),Object(b.jsx)(P,{createPoll:f})]}),Object(b.jsx)(z.a,{xs:1,sm:2,lg:3,className:"g-3 mb-5 g-xl-4 g-xxl-5",children:Object(b.jsx)(b.Fragment,{children:o.map((function(n,t){return Object(b.jsx)(S,{address:e,poll:n,vote:g,optIn:h,declareWinner:v,deletePoll:m},t)}))})})]})},V=t(8),G=t.p+"static/media/voting.f1bc2b5c.jpg",M=function(){var n=Object(a.useState)(null),e=Object(l.a)(n,2),t=e[0],c=e[1],r=Object(a.useState)(null),o=Object(l.a)(r,2),u=o[0],d=o[1],j=Object(a.useState)(0),O=Object(l.a)(j,2),x=O[0],f=O[1],m=function(){var n=Object(s.a)(Object(i.a)().mark((function n(e){return Object(i.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:V.c.lookupAccountByID(e).do().then((function(n){var e=n.account.amount;f(e)})).catch((function(n){console.log(n)}));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),g=function(){var n=Object(s.a)(Object(i.a)().mark((function n(){return Object(i.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:V.e.connect().then((function(n){var e=n[0];c(e.address),d(e.name),m(e.address)})).catch((function(n){console.log("Could not connect to MyAlgo wallet"),console.error(n)}));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(D,{}),t?Object(b.jsxs)(N.a,{fluid:"md",children:[Object(b.jsx)(T.a,{className:"justify-content-end pt-3 pb-5",children:Object(b.jsx)(T.a.Item,{children:Object(b.jsx)(y,{address:t,name:u,amount:x,disconnect:function(){c(null),d(null),f(null)},symbol:"ALGO"})})}),Object(b.jsx)("main",{children:Object(b.jsx)(W,{address:t,fetchBalance:m})})]}):Object(b.jsx)(p,{name:"Voting app",coverImg:G,connect:g})]})},X=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,346)).then((function(e){var t=e.getCLS,a=e.getFID,c=e.getFCP,r=e.getLCP,o=e.getTTFB;t(n),a(n),c(n),r(n),o(n)}))};t(328),t(329),t(330);o.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(M,{})}),document.getElementById("root")),X()},44:function(n,e,t){"use strict";(function(n){t.d(e,"a",(function(){return x})),t.d(e,"e",(function(){return f})),t.d(e,"b",(function(){return m})),t.d(e,"f",(function(){return g})),t.d(e,"c",(function(){return h})),t.d(e,"d",(function(){return v}));var a=t(63),c=t(10),r=t(17),o=t(61),i=t(60),s=t(13),l=t.n(s),u=t(8),b=t(185),p=t(186),d=t(21),j=Object(o.a)((function n(e,t,a,c,r,o,s,l,u,b,p,d,j,O){Object(i.a)(this,n),this.id=e,this.image=t,this.description=a,this.option1=c,this.option2=r,this.option3=o,this.count1=s,this.count2=l,this.count3=u,this.voting_start=b,this.voting_end=p,this.winner=d,this.owner=j,this.appId=O})),O=function(){var e=Object(r.a)(Object(c.a)().mark((function e(t){var a,r,o;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new TextEncoder,r=a.encode(t),e.next=4,u.b.compile(r).do();case 4:return o=e.sent,e.abrupt("return",new Uint8Array(n.from(o.result,"base64")));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),x=function(){var n=Object(r.a)(Object(c.a)().mark((function n(e,t){var a,r,o,i,s,d,j,x,f,m,g,h,v,_,y,N,T,w;return Object(c.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Adding poll..."),n.next=3,u.b.getTransactionParams().do();case 3:return(a=n.sent).fee=l.a.ALGORAND_MIN_TX_FEE,a.flatFee=!0,n.next=8,O(b.a);case 8:return r=n.sent,n.next=11,O(p.a);case 11:return o=n.sent,i=(new TextEncoder).encode(u.j),s=(new TextEncoder).encode(t.id),d=(new TextEncoder).encode(t.image),j=(new TextEncoder).encode(t.description),x=(new TextEncoder).encode(t.option1),f=(new TextEncoder).encode(t.option2),m=(new TextEncoder).encode(t.option3),g=l.a.encodeUint64(t.voting_end),h=[s,d,j,x,f,m,g],v=l.a.makeApplicationCreateTxnFromObject({from:e,suggestedParams:a,onComplete:l.a.OnApplicationComplete.NoOpOC,approvalProgram:r,clearProgram:o,numLocalInts:u.i,numLocalByteSlices:u.h,numGlobalInts:u.g,numGlobalByteSlices:u.f,note:i,appArgs:h}),_=v.txID().toString(),n.next=25,u.e.signTransaction(v.toByte());case 25:return y=n.sent,console.log("Signed transaction with txID: %s",_),n.next=29,u.b.sendRawTransaction(y.blob).do();case 29:return n.next=31,l.a.waitForConfirmation(u.b,_,4);case 31:return N=n.sent,console.log("Transaction "+_+" confirmed in round "+N["confirmed-round"]),n.next=35,u.b.pendingTransactionInformation(_).do();case 35:return T=n.sent,w=T["application-index"],console.log("Created new app-id: ",w),n.abrupt("return",w);case 39:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),f=function(){var n=Object(r.a)(Object(c.a)().mark((function n(e,t){var a,r,o,i,s;return Object(c.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Opting in..."),n.next=3,u.b.getTransactionParams().do();case 3:return(a=n.sent).fee=l.a.ALGORAND_MIN_TX_FEE,a.flatFee=!0,r=l.a.makeApplicationOptInTxnFromObject({from:e,appIndex:t.appId,onComplete:l.a.OnApplicationComplete.NoOpOC,suggestedParams:a}),n.next=9,u.e.signTransaction(r.toByte());case 9:return o=n.sent,n.next=12,u.b.sendRawTransaction(o.blob).do();case 12:return i=n.sent,n.next=15,l.a.waitForConfirmation(u.b,i.txId,4);case 15:s=n.sent,console.log("Voting transaction "+i.txId+" confirmed in round "+s["confirmed-round"]);case 17:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),m=function(){var n=Object(r.a)(Object(c.a)().mark((function n(e,t){var a,r,o,i,s,b,p;return Object(c.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Declaring the winner..."),n.next=3,u.b.getTransactionParams().do();case 3:return(a=n.sent).fee=l.a.ALGORAND_MIN_TX_FEE,a.flatFee=!0,r=(new TextEncoder).encode("declare_winner"),o=[r],i=l.a.makeApplicationCallTxnFromObject({from:e,appIndex:t.appId,onComplete:l.a.OnApplicationComplete.NoOpOC,suggestedParams:a,appArgs:o}),n.next=11,u.e.signTransaction(i.toByte());case 11:return s=n.sent,n.next=14,u.b.sendRawTransaction(s.blob).do();case 14:return b=n.sent,n.next=17,l.a.waitForConfirmation(u.b,b.txId,4);case 17:p=n.sent,console.log("Voting transaction "+b.txId+" confirmed in round "+p["confirmed-round"]);case 19:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),g=function(){var n=Object(r.a)(Object(c.a)().mark((function n(e,t,a){var r,o,i,s,b,p,d,j;return Object(c.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Voting..."),n.next=3,u.b.getTransactionParams().do();case 3:return(r=n.sent).fee=l.a.ALGORAND_MIN_TX_FEE,r.flatFee=!0,o=(new TextEncoder).encode("vote"),i=(new TextEncoder).encode(a),s=[o,i],console.log("Option: ",a),b=l.a.makeApplicationCallTxnFromObject({from:e,appIndex:t.appId,onComplete:l.a.OnApplicationComplete.NoOpOC,suggestedParams:r,appArgs:s}),n.next=13,u.e.signTransaction(b.toByte());case 13:return p=n.sent,n.next=16,u.b.sendRawTransaction(p.blob).do();case 16:return d=n.sent,n.next=19,l.a.waitForConfirmation(u.b,d.txId,4);case 19:j=n.sent,console.log("Voting transaction "+d.txId+" confirmed in round "+j["confirmed-round"]);case 21:case"end":return n.stop()}}),n)})));return function(e,t,a){return n.apply(this,arguments)}}(),h=function(){var n=Object(r.a)(Object(c.a)().mark((function n(e,t){var a,r,o,i,s,b,p;return Object(c.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Deleting application..."),n.next=3,u.b.getTransactionParams().do();case 3:return(a=n.sent).fee=l.a.ALGORAND_MIN_TX_FEE,a.flatFee=!0,r=l.a.makeApplicationDeleteTxnFromObject({from:e,suggestedParams:a,appIndex:t}),o=r.txID().toString(),n.next=10,u.e.signTransaction(r.toByte());case 10:return i=n.sent,console.log("Signed transaction with txID: %s",o),n.next=14,u.b.sendRawTransaction(i.blob).do();case 14:return n.next=16,l.a.waitForConfirmation(u.b,o,4);case 16:return s=n.sent,console.log("Transaction "+o+" confirmed in round "+s["confirmed-round"]),n.next=20,u.b.pendingTransactionInformation(o).do();case 20:b=n.sent,p=b.txn.txn.apid,console.log("Deleted app-id: ",p);case 23:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),v=function(){var e=Object(r.a)(Object(c.a)().mark((function e(){var t,r,o,i,s,l,b,p,d;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Fetching polls..."),t=(new TextEncoder).encode(u.j),r=n.from(t).toString("base64"),e.next=5,u.c.searchForTransactions().notePrefix(r).txType("appl").minRound(u.d).do();case 5:o=e.sent,i=[],s=Object(a.a)(o.transactions),e.prev=8,s.s();case 10:if((l=s.n()).done){e.next=20;break}if(b=l.value,!(p=b["created-application-index"])){e.next=18;break}return e.next=16,_(p);case 16:(d=e.sent)&&i.push(d);case 18:e.next=10;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(8),s.e(e.t0);case 25:return e.prev=25,s.f(),e.finish(25);case 28:return console.log("Polls fetched."),e.abrupt("return",i);case 30:case"end":return e.stop()}}),e,null,[[8,22,25,28]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var n=Object(r.a)(Object(c.a)().mark((function n(e){var t,a,r,o,i,s,l,b,p,O,x,f,m,g,h,v,_,y,N,T,w,I,C;return Object(c.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.c.lookupApplications(e).includeAll(!0).do();case 3:if(!(t=n.sent).application.deleted){n.next=6;break}return n.abrupt("return",null);case 6:return a=t.application.params["global-state"],r=t.application.params.creator,o="",i="",s="",l="",b="",p="",O="",x=0,f=0,m=0,g=0,h=0,v=function(n,e){return e.find((function(e){return e.key===Object(d.e)(n)}))},void 0!==v("ID",a)&&(_=v("ID",a).value.bytes,o=Object(d.a)(_)),void 0!==v("IMAGE",a)&&(y=v("IMAGE",a).value.bytes,i=Object(d.a)(y)),void 0!==v("DESCRIPTION",a)&&(N=v("DESCRIPTION",a).value.bytes,s=Object(d.a)(N)),void 0!==v("OPTION1",a)&&(T=v("OPTION1",a).value.bytes,l=Object(d.a)(T)),void 0!==v("OPTION2",a)&&(w=v("OPTION2",a).value.bytes,b=Object(d.a)(w)),void 0!==v("OPTION3",a)&&(I=v("OPTION3",a).value.bytes,p=Object(d.a)(I)),void 0!==v("WINNER",a)&&(C=v("WINNER",a).value.bytes,O=Object(d.a)(C)),void 0!==v("START",a)&&(x=v("START",a).value.uint),void 0!==v("END",a)&&(f=v("END",a).value.uint),void 0!==v("COUNT1",a)&&(m=v("COUNT1",a).value.uint),void 0!==v("COUNT2",a)&&(g=v("COUNT2",a).value.uint),void 0!==v("COUNT3",a)&&(h=v("COUNT3",a).value.uint),n.abrupt("return",new j(o,i,s,l,b,p,m,g,h,x,f,O,r,e));case 36:return n.prev=36,n.t0=n.catch(0),n.abrupt("return",null);case 39:case"end":return n.stop()}}),n,null,[[0,36]])})));return function(e){return n.apply(this,arguments)}}()}).call(this,t(14).Buffer)},8:function(n,e,t){"use strict";t.d(e,"b",(function(){return d})),t.d(e,"c",(function(){return j})),t.d(e,"e",(function(){return O})),t.d(e,"d",(function(){return x})),t.d(e,"j",(function(){return f})),t.d(e,"i",(function(){return m})),t.d(e,"h",(function(){return g})),t.d(e,"g",(function(){return h})),t.d(e,"f",(function(){return v})),t.d(e,"a",(function(){return _}));var a=t(13),c=t.n(a),r=t(181),o=t.n(r),i="",s="https://node.testnet.algoexplorerapi.io",l="",u="",b="https://algoindexer.testnet.algoexplorerapi.io",p="",d=new c.a.Algodv2(i,s,l),j=new c.a.Indexer(u,b,p),O=new o.a,x=21540981,f="voting-system:uv1",m=1,g=0,h=5,v=8,_=6}},[[331,1,2]]]);
//# sourceMappingURL=main.39296f6e.chunk.js.map