(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{185:function(e,n,t){"use strict";n.a='#pragma version 5\ntxn ApplicationID\nint 0\n==\nbnz main_l24\ntxn OnCompletion\nint DeleteApplication\n==\nbnz main_l23\ntxn OnCompletion\nint UpdateApplication\n==\nbnz main_l22\ntxn OnCompletion\nint OptIn\n==\nbnz main_l21\ntxna ApplicationArgs 0\nbyte "vote"\n==\nbnz main_l13\ntxna ApplicationArgs 0\nbyte "declare_winner"\n==\nbnz main_l7\nerr\nmain_l7:\ntxn Sender\nbyte "OWNER"\napp_global_get\n==\nglobal LatestTimestamp\nbyte "END"\napp_global_get\n>=\n&&\nassert\nbyte "WINNER"\nbyte "OPTION1"\napp_global_get\napp_global_put\nbyte "COUNT2"\napp_global_get\nbyte "COUNT1"\napp_global_get\n>\nbnz main_l12\nbyte "COUNT3"\napp_global_get\nbyte "COUNT2"\napp_global_get\n>\nbnz main_l10\nerr\nmain_l10:\nbyte "WINNER"\nbyte "OPTION3"\napp_global_get\napp_global_put\nmain_l11:\nint 1\nreturn\nmain_l12:\nbyte "WINNER"\nbyte "OPTION2"\napp_global_get\napp_global_put\nb main_l11\nmain_l13:\ntxn NumAppArgs\nint 2\n==\ntxn Sender\nbyte "VOTED"\napp_local_get\nint 0\n==\n&&\nglobal LatestTimestamp\nbyte "END"\napp_global_get\n<\n&&\nassert\ntxna ApplicationArgs 1\nbyte "OPTION1"\napp_global_get\n==\nbnz main_l20\ntxna ApplicationArgs 1\nbyte "OPTION2"\napp_global_get\n==\nbnz main_l19\ntxna ApplicationArgs 1\nbyte "OPTION3"\napp_global_get\n==\nbnz main_l17\nerr\nmain_l17:\nbyte "COUNT3"\nbyte "COUNT3"\napp_global_get\nint 1\n+\napp_global_put\nmain_l18:\ntxn Sender\nbyte "VOTED"\nint 1\napp_local_put\nint 1\nreturn\nmain_l19:\nbyte "COUNT2"\nbyte "COUNT2"\napp_global_get\nint 1\n+\napp_global_put\nb main_l18\nmain_l20:\nbyte "COUNT1"\nbyte "COUNT1"\napp_global_get\nint 1\n+\napp_global_put\nb main_l18\nmain_l21:\nint 1\nreturn\nmain_l22:\nglobal CreatorAddress\ntxn Sender\n==\nassert\nint 1\nreturn\nmain_l23:\ntxn Sender\nglobal CreatorAddress\n==\nreturn\nmain_l24:\ntxn NumAppArgs\nint 7\n==\nassert\ntxn Note\nbyte "voting-system:uv1"\n==\nassert\nbyte "ID"\ntxna ApplicationArgs 0\napp_global_put\nbyte "IMAGE"\ntxna ApplicationArgs 1\napp_global_put\nbyte "DESCRIPTION"\ntxna ApplicationArgs 2\napp_global_put\nbyte "OPTION1"\ntxna ApplicationArgs 3\napp_global_put\nbyte "OPTION2"\ntxna ApplicationArgs 4\napp_global_put\nbyte "OPTION3"\ntxna ApplicationArgs 5\napp_global_put\nbyte "START"\nglobal LatestTimestamp\napp_global_put\nbyte "END"\nglobal LatestTimestamp\ntxna ApplicationArgs 6\nbtoi\n+\napp_global_put\nbyte "OWNER"\ntxn Sender\napp_global_put\nbyte "COUNT1"\nint 0\napp_global_put\nbyte "COUNT2"\nint 0\napp_global_put\nbyte "COUNT3"\nint 0\napp_global_put\nbyte "WINNER"\nbyte ""\napp_global_put\nint 1\nreturn'},186:function(e,n,t){"use strict";n.a="#pragma version 5\nint 1\nreturn"},193:function(e,n,t){},21:function(e,n,t){"use strict";(function(e){t.d(n,"a",(function(){return o})),t.d(n,"e",(function(){return i})),t.d(n,"d",(function(){return s})),t.d(n,"b",(function(){return l})),t.d(n,"c",(function(){return u}));var a=t(8),c=t(92),r=t.n(c),o=function(n){return e.from(n,"base64").toString("utf-8")},i=function(n){return e.from(n,"utf8").toString("base64")},s=function(e){if(e)return e.toString().slice(0,5)+"..."+e.toString().slice(e.length-5,e.length)},l=function(e){if(e)return new r.a(e).shiftedBy(-a.a).toFixed(3)},u=function(e){if(e)return new r.a(e).toNumber()}}).call(this,t(14).Buffer)},215:function(e,n){},217:function(e,n){},228:function(e,n){},230:function(e,n){},257:function(e,n){},259:function(e,n){},260:function(e,n){},265:function(e,n){},267:function(e,n){},273:function(e,n){},275:function(e,n){},294:function(e,n){},306:function(e,n){},309:function(e,n){},331:function(e,n,t){"use strict";t.r(n);var a=t(0),c=t.n(a),r=t(30),o=t.n(r),i=t(10),s=t(16),l=t(6),u=t(180),b=t(1),p=function(e){var n=e.name,t=e.coverImg,a=e.connect;return Object(b.jsxs)("div",{className:"d-flex justify-content-center flex-column text-center bg-black min-vh-100",children:[Object(b.jsxs)("div",{className:"mt-auto text-light mb-5",children:[Object(b.jsx)("div",{className:" ratio ratio-1x1 mx-auto mb-2",style:{maxWidth:"320px"},children:Object(b.jsx)("img",{src:t,alt:""})}),Object(b.jsx)("h1",{children:n}),Object(b.jsx)("p",{children:"Please connect your wallet to continue."}),Object(b.jsx)(u.a,{onClick:function(){return a()},variant:"outline-light",className:"rounded-pill px-3 mt-3",children:"Connect Wallet"})]}),Object(b.jsx)("p",{className:"mt-auto text-secondary",children:"Powered by Algorand"})]})},d=(t(193),t(340)),j=t(337),O=t(345),x=t(21),f=t(2),g=t(3),m=t(182),h=t.n(m),v=["size","address"],_=function(e){var n=e.size,t=e.address,a=Object(g.a)(e,v);return Object(b.jsx)("div",Object(f.a)(Object(f.a)({},a),{},{style:{width:"".concat(n,"px"),height:"".concat(n,"px")},children:Object(b.jsx)(h.a,{diameter:n,seed:parseInt(t.toString().slice(2,10),16)})}))},y=function(e){var n=e.address,t=e.name,a=e.amount,c=e.symbol,r=e.disconnect;return n?Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(d.a,{children:[Object(b.jsxs)(d.a.Toggle,{variant:"light",align:"end",id:"dropdown-basic",className:"d-flex align-items-center border rounded-pill py-1",children:[a?Object(b.jsxs)(b.Fragment,{children:[Object(x.b)(a),Object(b.jsxs)("span",{className:"ms-1",children:[" ",c]})]}):Object(b.jsx)(j.a,{animation:"border",size:"sm",className:"opacity-25"}),Object(b.jsx)(_,{address:n,size:28,className:"ms-2 me-1"})]}),Object(b.jsxs)(d.a.Menu,{className:"shadow-lg border-0",children:[Object(b.jsx)(d.a.Item,{href:"https://testnet.algoexplorer.io/address/".concat(n),target:"_blank",children:Object(b.jsxs)(O.a,{direction:"horizontal",gap:2,children:[Object(b.jsx)("i",{className:"bi bi-person-circle fs-4"}),Object(b.jsxs)("div",{className:"d-flex flex-column",children:[t&&Object(b.jsx)("span",{className:"font-monospace",children:t}),Object(b.jsx)("span",{className:"font-monospace",children:Object(x.d)(n)})]})]})}),Object(b.jsx)(d.a.Divider,{}),Object(b.jsxs)(d.a.Item,{as:"button",className:"d-flex align-items-center",onClick:function(){r()},children:[Object(b.jsx)("i",{className:"bi bi-box-arrow-right me-2 fs-4"}),"Disconnect"]})]})]})}):null},N=t(339),T=t(343),w=t(23),I=t(341),C=t(342),A=t(184),k=function(e){var n=e.createPoll,t=Object(a.useState)(""),c=Object(l.a)(t,2),r=c[0],o=c[1],i=Object(a.useState)(""),s=Object(l.a)(i,2),p=s[0],d=s[1],j=Object(a.useState)(""),O=Object(l.a)(j,2),f=O[0],g=O[1],m=Object(a.useState)(""),h=Object(l.a)(m,2),v=h[0],_=h[1],y=Object(a.useState)(""),N=Object(l.a)(y,2),T=N[0],w=N[1],k=Object(a.useState)(""),P=Object(l.a)(k,2),S=P[0],E=P[1],D=Object(a.useState)(0),F=Object(l.a)(D,2),R=F[0],U=F[1],L=Object(a.useCallback)((function(){return r&&p&&f&&v&&T&&S&&R}),[r,p,f,v,T,S,R]),B=Object(a.useState)(!1),z=Object(l.a)(B,2),W=z[0],V=z[1],G=function(){return V(!1)};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(u.a,{onClick:function(){return V(!0)},variant:"dark",className:"rounded-pill px-0",style:{width:"38px"},children:Object(b.jsx)("i",{className:"bi bi-plus"})}),Object(b.jsxs)(I.a,{show:W,onHide:G,centered:!0,children:[Object(b.jsx)(I.a.Header,{closeButton:!0,children:Object(b.jsx)(I.a.Title,{children:"New Poll"})}),Object(b.jsx)(C.a,{children:Object(b.jsxs)(I.a.Body,{children:[Object(b.jsx)(A.a,{controlId:"inputName",label:"Product name",className:"mb-3",children:Object(b.jsx)(C.a.Control,{type:"text",onChange:function(e){o(e.target.value)},placeholder:"Enter name of product"})}),Object(b.jsx)(A.a,{controlId:"inputUrl",label:"Image URL",className:"mb-3",children:Object(b.jsx)(C.a.Control,{type:"text",placeholder:"Image URL",value:p,onChange:function(e){d(e.target.value)}})}),Object(b.jsx)(A.a,{controlId:"inputDescription",label:"Description",className:"mb-3",children:Object(b.jsx)(C.a.Control,{as:"textarea",placeholder:"description",style:{height:"80px"},onChange:function(e){g(e.target.value)}})}),Object(b.jsx)(A.a,{controlId:"inputDescription",label:"Option1",className:"mb-3",children:Object(b.jsx)(C.a.Control,{as:"textarea",placeholder:"option1",style:{height:"80px"},onChange:function(e){_(e.target.value)}})}),Object(b.jsx)(A.a,{controlId:"inputDescription",label:"Option2",className:"mb-3",children:Object(b.jsx)(C.a.Control,{as:"textarea",placeholder:"option2",style:{height:"80px"},onChange:function(e){w(e.target.value)}})}),Object(b.jsx)(A.a,{controlId:"inputDescription",label:"Option3",className:"mb-3",children:Object(b.jsx)(C.a.Control,{as:"textarea",placeholder:"option2",style:{height:"80px"},onChange:function(e){E(e.target.value)}})}),Object(b.jsx)(A.a,{controlId:"inputDescription",label:"Voting duration in seconds",className:"mb-3",children:Object(b.jsx)(C.a.Control,{type:"text",placeholder:"0",style:{height:"80px"},onChange:function(e){U(Object(x.c)(e.target.value))}})})]})}),Object(b.jsxs)(I.a.Footer,{children:[Object(b.jsx)(u.a,{variant:"outline-secondary",onClick:G,children:"Close"}),Object(b.jsx)(u.a,{variant:"dark",disabled:!L(),onClick:function(){n({id:r,image:p,description:f,option1:v,option2:T,option3:S,voting_end:R}),G()},children:"Save poll"})]})]})]})},P=t(183),S=t(344),E=t(36),D=function(e){var n=e.address,t=e.poll,c=e.vote,r=e.optIn,o=e.declareWinner,i=e.deletePoll,s=(e.isOptedIn,t.id),p=t.image,d=t.description,j=t.option1,f=t.option2,g=t.option3,m=t.count1,h=t.count2,v=t.count3,y=t.voting_start,N=t.voting_end,T=t.winner,w=t.owner,I=t.appId,A=Object(a.useState)(""),k=Object(l.a)(A,2),D=k[0],F=k[1],R=Object(a.useState)(""),U=Object(l.a)(R,2),L=U[0],B=U[1];return Object(b.jsx)(P.a,{children:Object(b.jsxs)(S.a,{className:"h-100",children:[Object(b.jsx)(S.a.Header,{children:Object(b.jsxs)(O.a,{direction:"horizontal",gap:2,children:[Object(b.jsx)("span",{className:"font-monospace text-secondary",children:Object(x.d)(w)}),Object(b.jsx)(_,{size:28,address:w})]})}),Object(b.jsx)("div",{className:"ratio ratio-4x3",children:Object(b.jsx)("img",{src:p,alt:s,style:{objectFit:"cover"}})}),Object(b.jsxs)(S.a.Body,{className:"d-flex flex-column text-center",children:[Object(b.jsx)(S.a.Title,{children:s}),Object(b.jsx)(S.a.Text,{className:"flex-grow-1",children:d}),Object(b.jsxs)(C.a,{className:"d-flex align-content-stretch flex-column gap-2",children:[Object(b.jsx)("div",{style:{fontWeight:"bold",fontStyle:"italic"},children:"Select option for voting"}),Object(b.jsxs)("div",{onChange:function(e){F(e.target.value)},children:[Object(b.jsx)("input",{type:"radio",value:j})," ",j," (",m,")",Object(b.jsx)("input",{type:"radio",value:f})," ",f," (",h,")",Object(b.jsx)("input",{type:"radio",value:g})," ",g," (",v,")"]}),Object(b.jsx)("div",{children:(Object(E.e)(n,I).then((function(e){B(e)})),L?Object(b.jsx)(u.a,{disabled:!0,children:"Opted in"}):Object(b.jsx)(u.a,{onClick:function(){return r(n,t)},children:"OptIn"}))}),Object(b.jsx)("div",{children:L?Object(b.jsx)(u.a,{onClick:function(){return c(t,D)},children:"Vote"}):Object(b.jsx)(u.a,{disabled:!0,children:"Vote"})}),Object(b.jsxs)("div",{children:[n==w&&Object(b.jsx)(u.a,{onClick:function(){return o(n,t)},children:"Declare winner"}),"Winner: ",T]}),Object(b.jsx)("div",{children:function(){var e=new Date(1e3*y),n=new Date(1e3*N);return Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{children:["Voting start: ",e.toLocaleTimeString("default")," h"]}),Object(b.jsxs)("div",{children:["Voting end: ",n.toLocaleTimeString("default")," h"]})]})}()}),Object(b.jsx)("div",{children:t.owner===n&&Object(b.jsxs)("div",{children:["Delete poll",Object(b.jsx)(u.a,{variant:"outline-danger",onClick:function(){return i(t)},className:"btn",style:{marginLeft:"10px"},children:Object(b.jsx)("i",{className:"bi bi-trash"})})]})})]})]})]})},s)},F=function(){return Object(b.jsx)("div",{className:"d-flex justify-content-center",children:Object(b.jsx)(j.a,{animation:"border",role:"status",className:"opacity-25",children:Object(b.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})},R=function(){return Object(b.jsx)(w.a,{position:"bottom-center",autoClose:5e3,hideProgressBar:!0,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!1,pauseOnHover:!0})},U=function(e){var n=e.text;return Object(b.jsxs)("div",{children:[Object(b.jsx)("i",{className:"bi bi-check-circle-fill text-success mx-2"}),Object(b.jsx)("span",{className:"text-secondary mx-1",children:n})]})},L=function(e){var n=e.text;return Object(b.jsxs)("div",{children:[Object(b.jsx)("i",{className:"bi bi-x-circle-fill text-danger mx-2"}),Object(b.jsx)("span",{className:"text-secondary mx-1",children:n})]})},B={text:""};U.defaultProps=B,L.defaultProps=B;var z=t(338),W=function(e){var n=e.address,t=e.fetchBalance,c=Object(a.useState)([]),r=Object(l.a)(c,2),o=r[0],u=r[1],p=Object(a.useState)(!1),d=Object(l.a)(p,2),j=d[0],O=d[1],x=function(){var e=Object(s.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(!0),Object(E.d)().then((function(e){e&&(console.log("Pollllllls: ",e),u(e))})).catch((function(e){console.log(e)})).finally((function(e){O(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){x()}),[]);var f=function(){var e=Object(s.a)(Object(i.a)().mark((function e(a){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(!0),Object(E.a)(n,a).then((function(){Object(w.b)(Object(b.jsx)(U,{text:"Poll added successfully."})),x(),t(n)})).catch((function(e){console.log(e),Object(w.b)(Object(b.jsx)(L,{text:"Failed to create a poll."})),O(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),g=function(){var e=Object(s.a)(Object(i.a)().mark((function e(a){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(!0),Object(E.c)(n,a.appId).then((function(){Object(w.b)(Object(b.jsx)(U,{text:"Poll deleted successfully"})),x(),t(n)})).catch((function(e){console.log(e),Object(w.b)(Object(b.jsx)(L,{text:"Failed to delete poll."})),O(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),m=function(){var e=Object(s.a)(Object(i.a)().mark((function e(a,c){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(!0),Object(E.g)(n,a,c).then((function(){Object(w.b)(Object(b.jsx)(U,{text:"Voted successfully"})),x(),t(n)})).catch((function(e){console.log(e),Object(w.b)(Object(b.jsx)(L,{text:"Failed to vote."})),O(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),h=function(){var e=Object(s.a)(Object(i.a)().mark((function e(n,a){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(!0),Object(E.f)(n,a).then((function(){Object(w.b)(Object(b.jsx)(U,{text:"Opted in successfully"})),x(),t(n)})).catch((function(e){console.log(e),Object(w.b)(Object(b.jsx)(L,{text:"Failed to optIn."})),O(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),v=function(){var e=Object(s.a)(Object(i.a)().mark((function e(n,a){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(!0),Object(E.b)(n,a).then((function(){Object(w.b)(Object(b.jsx)(U,{text:"Successfully ended action"})),x(),t(n)})).catch((function(e){console.log(e),Object(w.b)(Object(b.jsx)(L,{text:"Failed to declare a winner."})),O(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),_=function(e,n){Object(E.e)(e,n).then((function(e){return e})).catch((function(e){return console.log(e),e}))};return j?Object(b.jsx)(F,{}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[Object(b.jsx)("h1",{className:"fs-4 fw-bold mb-0",children:"Algo voting"}),Object(b.jsx)(k,{createPoll:f})]}),Object(b.jsx)(z.a,{xs:1,sm:2,lg:3,className:"g-3 mb-5 g-xl-4 g-xxl-5",children:Object(b.jsx)(b.Fragment,{children:o.map((function(e,t){return Object(b.jsx)(D,{address:n,poll:e,vote:m,optIn:h,declareWinner:v,deletePoll:g,isOptedIn:_},t)}))})})]})},V=t(8),G=t.p+"static/media/voting.f1bc2b5c.jpg",M=function(){var e=Object(a.useState)(null),n=Object(l.a)(e,2),t=n[0],c=n[1],r=Object(a.useState)(null),o=Object(l.a)(r,2),u=o[0],d=o[1],j=Object(a.useState)(0),O=Object(l.a)(j,2),x=O[0],f=O[1],g=function(){var e=Object(s.a)(Object(i.a)().mark((function e(n){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V.c.lookupAccountByID(n).do().then((function(e){var n=e.account.amount;f(n)})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),m=function(){var e=Object(s.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V.e.connect().then((function(e){var n=e[0];c(n.address),d(n.name),g(n.address)})).catch((function(e){console.log("Could not connect to MyAlgo wallet"),console.error(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(R,{}),t?Object(b.jsxs)(N.a,{fluid:"md",children:[Object(b.jsx)(T.a,{className:"justify-content-end pt-3 pb-5",children:Object(b.jsx)(T.a.Item,{children:Object(b.jsx)(y,{address:t,name:u,amount:x,disconnect:function(){c(null),d(null),f(null)},symbol:"ALGO"})})}),Object(b.jsx)("main",{children:Object(b.jsx)(W,{address:t,fetchBalance:g})})]}):Object(b.jsx)(p,{name:"Voting app",coverImg:G,connect:m})]})},X=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,346)).then((function(n){var t=n.getCLS,a=n.getFID,c=n.getFCP,r=n.getLCP,o=n.getTTFB;t(e),a(e),c(e),r(e),o(e)}))};t(328),t(329),t(330);o.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(M,{})}),document.getElementById("root")),X()},36:function(e,n,t){"use strict";(function(e){t.d(n,"a",(function(){return x})),t.d(n,"f",(function(){return f})),t.d(n,"b",(function(){return g})),t.d(n,"g",(function(){return m})),t.d(n,"c",(function(){return h})),t.d(n,"d",(function(){return v})),t.d(n,"e",(function(){return _}));var a=t(63),c=t(10),r=t(16),o=t(61),i=t(60),s=t(13),l=t.n(s),u=t(8),b=t(185),p=t(186),d=t(21),j=Object(o.a)((function e(n,t,a,c,r,o,s,l,u,b,p,d,j,O){Object(i.a)(this,e),this.id=n,this.image=t,this.description=a,this.option1=c,this.option2=r,this.option3=o,this.count1=s,this.count2=l,this.count3=u,this.voting_start=b,this.voting_end=p,this.winner=d,this.owner=j,this.appId=O})),O=function(){var n=Object(r.a)(Object(c.a)().mark((function n(t){var a,r,o;return Object(c.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=new TextEncoder,r=a.encode(t),n.next=4,u.b.compile(r).do();case 4:return o=n.sent,n.abrupt("return",new Uint8Array(e.from(o.result,"base64")));case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),x=function(){var e=Object(r.a)(Object(c.a)().mark((function e(n,t){var a,r,o,i,s,d,j,x,f,g,m,h,v,_,y,N,T,w;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Adding poll..."),e.next=3,u.b.getTransactionParams().do();case 3:return(a=e.sent).fee=l.a.ALGORAND_MIN_TX_FEE,a.flatFee=!0,e.next=8,O(b.a);case 8:return r=e.sent,e.next=11,O(p.a);case 11:return o=e.sent,i=(new TextEncoder).encode(u.j),s=(new TextEncoder).encode(t.id),d=(new TextEncoder).encode(t.image),j=(new TextEncoder).encode(t.description),x=(new TextEncoder).encode(t.option1),f=(new TextEncoder).encode(t.option2),g=(new TextEncoder).encode(t.option3),m=l.a.encodeUint64(t.voting_end),h=[s,d,j,x,f,g,m],v=l.a.makeApplicationCreateTxnFromObject({from:n,suggestedParams:a,onComplete:l.a.OnApplicationComplete.NoOpOC,approvalProgram:r,clearProgram:o,numLocalInts:u.i,numLocalByteSlices:u.h,numGlobalInts:u.g,numGlobalByteSlices:u.f,note:i,appArgs:h}),_=v.txID().toString(),e.next=25,u.e.signTransaction(v.toByte());case 25:return y=e.sent,console.log("Signed transaction with txID: %s",_),e.next=29,u.b.sendRawTransaction(y.blob).do();case 29:return e.next=31,l.a.waitForConfirmation(u.b,_,4);case 31:return N=e.sent,console.log("Transaction "+_+" confirmed in round "+N["confirmed-round"]),e.next=35,u.b.pendingTransactionInformation(_).do();case 35:return T=e.sent,w=T["application-index"],console.log("Created new app-id: ",w),e.abrupt("return",w);case 39:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),f=function(){var e=Object(r.a)(Object(c.a)().mark((function e(n,t){var a,r,o,i,s;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Opting in..."),e.next=3,u.b.getTransactionParams().do();case 3:return(a=e.sent).fee=l.a.ALGORAND_MIN_TX_FEE,a.flatFee=!0,r=l.a.makeApplicationOptInTxnFromObject({from:n,appIndex:t.appId,onComplete:l.a.OnApplicationComplete.NoOpOC,suggestedParams:a}),e.next=9,u.e.signTransaction(r.toByte());case 9:return o=e.sent,e.next=12,u.b.sendRawTransaction(o.blob).do();case 12:return i=e.sent,e.next=15,l.a.waitForConfirmation(u.b,i.txId,4);case 15:s=e.sent,console.log("Voting transaction "+i.txId+" confirmed in round "+s["confirmed-round"]);case 17:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),g=function(){var e=Object(r.a)(Object(c.a)().mark((function e(n,t){var a,r,o,i,s,b,p;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Declaring the winner..."),e.next=3,u.b.getTransactionParams().do();case 3:return(a=e.sent).fee=l.a.ALGORAND_MIN_TX_FEE,a.flatFee=!0,r=(new TextEncoder).encode("declare_winner"),o=[r],i=l.a.makeApplicationCallTxnFromObject({from:n,appIndex:t.appId,onComplete:l.a.OnApplicationComplete.NoOpOC,suggestedParams:a,appArgs:o}),e.next=11,u.e.signTransaction(i.toByte());case 11:return s=e.sent,e.next=14,u.b.sendRawTransaction(s.blob).do();case 14:return b=e.sent,e.next=17,l.a.waitForConfirmation(u.b,b.txId,4);case 17:p=e.sent,console.log("Voting transaction "+b.txId+" confirmed in round "+p["confirmed-round"]);case 19:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),m=function(){var e=Object(r.a)(Object(c.a)().mark((function e(n,t,a){var r,o,i,s,b,p,d,j;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Voting..."),e.next=3,u.b.getTransactionParams().do();case 3:return(r=e.sent).fee=l.a.ALGORAND_MIN_TX_FEE,r.flatFee=!0,o=(new TextEncoder).encode("vote"),i=(new TextEncoder).encode(a),s=[o,i],console.log("Option: ",a),b=l.a.makeApplicationCallTxnFromObject({from:n,appIndex:t.appId,onComplete:l.a.OnApplicationComplete.NoOpOC,suggestedParams:r,appArgs:s}),e.next=13,u.e.signTransaction(b.toByte());case 13:return p=e.sent,e.next=16,u.b.sendRawTransaction(p.blob).do();case 16:return d=e.sent,e.next=19,l.a.waitForConfirmation(u.b,d.txId,4);case 19:j=e.sent,console.log("Voting transaction "+d.txId+" confirmed in round "+j["confirmed-round"]);case 21:case"end":return e.stop()}}),e)})));return function(n,t,a){return e.apply(this,arguments)}}(),h=function(){var e=Object(r.a)(Object(c.a)().mark((function e(n,t){var a,r,o,i,s,b,p;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Deleting application..."),e.next=3,u.b.getTransactionParams().do();case 3:return(a=e.sent).fee=l.a.ALGORAND_MIN_TX_FEE,a.flatFee=!0,r=l.a.makeApplicationDeleteTxnFromObject({from:n,suggestedParams:a,appIndex:t}),o=r.txID().toString(),e.next=10,u.e.signTransaction(r.toByte());case 10:return i=e.sent,console.log("Signed transaction with txID: %s",o),e.next=14,u.b.sendRawTransaction(i.blob).do();case 14:return e.next=16,l.a.waitForConfirmation(u.b,o,4);case 16:return s=e.sent,console.log("Transaction "+o+" confirmed in round "+s["confirmed-round"]),e.next=20,u.b.pendingTransactionInformation(o).do();case 20:b=e.sent,p=b.txn.txn.apid,console.log("Deleted app-id: ",p);case 23:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),v=function(){var n=Object(r.a)(Object(c.a)().mark((function n(){var t,r,o,i,s,l,b,p,d;return Object(c.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Fetching polls..."),t=(new TextEncoder).encode(u.j),r=e.from(t).toString("base64"),n.next=5,u.c.searchForTransactions().notePrefix(r).txType("appl").minRound(u.d).do();case 5:o=n.sent,i=[],s=Object(a.a)(o.transactions),n.prev=8,s.s();case 10:if((l=s.n()).done){n.next=20;break}if(b=l.value,!(p=b["created-application-index"])){n.next=18;break}return n.next=16,y(p);case 16:(d=n.sent)&&i.push(d);case 18:n.next=10;break;case 20:n.next=25;break;case 22:n.prev=22,n.t0=n.catch(8),s.e(n.t0);case 25:return n.prev=25,s.f(),n.finish(25);case 28:return console.log("Polls fetched."),n.abrupt("return",i);case 30:case"end":return n.stop()}}),n,null,[[8,22,25,28]])})));return function(){return n.apply(this,arguments)}}(),_=function(){var e=Object(r.a)(Object(c.a)().mark((function e(n,t){var a,r,o;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.c.lookupAccountAppLocalStates(n).do();case 2:a=e.sent,console.log(a["apps-local-states"]),r=a["apps-local-states"],o=0;case 6:if(!(o<r.length)){e.next=13;break}if(r[o].id!=t){e.next=10;break}return console.log("User is opted in into this app"),e.abrupt("return",!0);case 10:o++,e.next=6;break;case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),y=function(){var e=Object(r.a)(Object(c.a)().mark((function e(n){var t,a,r,o,i,s,l,b,p,O,x,f,g,m,h,v,_,y,N,T,w,I,C;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.c.lookupApplications(n).includeAll(!0).do();case 3:if(!(t=e.sent).application.deleted){e.next=6;break}return e.abrupt("return",null);case 6:return a=t.application.params["global-state"],r=t.application.params.creator,o="",i="",s="",l="",b="",p="",O="",x=0,f=0,g=0,m=0,h=0,v=function(e,n){return n.find((function(n){return n.key===Object(d.e)(e)}))},void 0!==v("ID",a)&&(_=v("ID",a).value.bytes,o=Object(d.a)(_)),void 0!==v("IMAGE",a)&&(y=v("IMAGE",a).value.bytes,i=Object(d.a)(y)),void 0!==v("DESCRIPTION",a)&&(N=v("DESCRIPTION",a).value.bytes,s=Object(d.a)(N)),void 0!==v("OPTION1",a)&&(T=v("OPTION1",a).value.bytes,l=Object(d.a)(T)),void 0!==v("OPTION2",a)&&(w=v("OPTION2",a).value.bytes,b=Object(d.a)(w)),void 0!==v("OPTION3",a)&&(I=v("OPTION3",a).value.bytes,p=Object(d.a)(I)),void 0!==v("WINNER",a)&&(C=v("WINNER",a).value.bytes,O=Object(d.a)(C)),void 0!==v("START",a)&&(x=v("START",a).value.uint),void 0!==v("END",a)&&(f=v("END",a).value.uint),void 0!==v("COUNT1",a)&&(g=v("COUNT1",a).value.uint),void 0!==v("COUNT2",a)&&(m=v("COUNT2",a).value.uint),void 0!==v("COUNT3",a)&&(h=v("COUNT3",a).value.uint),e.abrupt("return",new j(o,i,s,l,b,p,g,m,h,x,f,O,r,n));case 36:return e.prev=36,e.t0=e.catch(0),e.abrupt("return",null);case 39:case"end":return e.stop()}}),e,null,[[0,36]])})));return function(n){return e.apply(this,arguments)}}()}).call(this,t(14).Buffer)},8:function(e,n,t){"use strict";t.d(n,"b",(function(){return d})),t.d(n,"c",(function(){return j})),t.d(n,"e",(function(){return O})),t.d(n,"d",(function(){return x})),t.d(n,"j",(function(){return f})),t.d(n,"i",(function(){return g})),t.d(n,"h",(function(){return m})),t.d(n,"g",(function(){return h})),t.d(n,"f",(function(){return v})),t.d(n,"a",(function(){return _}));var a=t(13),c=t.n(a),r=t(181),o=t.n(r),i="",s="https://node.testnet.algoexplorerapi.io",l="",u="",b="https://algoindexer.testnet.algoexplorerapi.io",p="",d=new c.a.Algodv2(i,s,l),j=new c.a.Indexer(u,b,p),O=new o.a,x=21540981,f="voting-system:uv1",g=1,m=0,h=5,v=8,_=6}},[[331,1,2]]]);
//# sourceMappingURL=main.a41ef3a6.chunk.js.map